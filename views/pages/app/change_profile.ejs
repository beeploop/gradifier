<div x-data="{loading: false}">
    <div class="mb-4">
        <img id="preview"
            class="outline-1 outline-neutral-400 aspect-square w-40 h-40 mx-auto bg-neutral-300 rounded-sm" />
    </div>
    <form action="/app/profile/changeProfile" method="POST" enctype="multipart/form-data">
        <label for="file"
            class="flex flex-col items-center rounded border border-neutral-400 p-4 text-gray-900 shadow-sm sm:p-6">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor" class="size-6">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="M7.5 7.5h-.75A2.25 2.25 0 0 0 4.5 9.75v7.5a2.25 2.25 0 0 0 2.25 2.25h7.5a2.25 2.25 0 0 0 2.25-2.25v-7.5a2.25 2.25 0 0 0-2.25-2.25h-.75m0-3-3-3m0 0-3 3m3-3v11.25m6-2.25h.75a2.25 2.25 0 0 1 2.25 2.25v7.5a2.25 2.25 0 0 1-2.25 2.25h-7.5a2.25 2.25 0 0 1-2.25-2.25v-.75" />
            </svg>

            <span class="mt-4 font-medium"> Upload your image</span>

            <span
                class="mt-2 inline-block rounded border border-neutral-400 px-3 py-1.5 text-center text-xs font-medium shadow-sm hover:bg-gray-300 cursor-pointer">
                Browse files
            </span>

            <input type="file" id="file" name="file" class="sr-only" required />
        </label>
        <div class="flex justify-end mt-2">
            <!-- primary Loading Button -->
            <button type="submit" x-on:click="loading = !loading" id="submit"
                class="inline-flex items-center gap-2 whitespace-nowrap rounded-sm bg-primary px-4 py-2 text-sm font-medium tracking-wide cursor-pointer hover:opacity-80">
                <svg x-show="loading" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                    class="size-5 animate-spin motion-reduce:animate-none fill-neutral-100">
                    <path opacity="0.25"
                        d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" />
                    <path
                        d="M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z" />
                </svg>
                <p x-text="loading ? 'uploading' : 'upload'"></p>
            </button>
        </div>
    </form>
    <script src="/scripts/image_preview.js"></script>
</div>
